---
- name: Create Homebrew directory if it does not exists (macOS >= 10.13)
  file:
    path: "{{ homebrew_prefix }}"
    owner: root
    state: directory
  become: yes
  when: "ansible_distribution_version is version('10.13', '>=')"

- name: Create Homebrew directory if it does not exists (macOS < 10.13)
  file:
    path: "{{ homebrew_prefix }}"
    owner: root
    group: admin
    state: directory
  become: yes
  when: "ansible_distribution_version is version('10.13', '<')"

- name: Ensure Homebrew directory has the correct permissions
  file:
    path: "{{ homebrew_prefix }}"
    owner: "{{ homebrew_user }}"
    group: "{{ homebrew_group }}"
    state: directory
  become: yes
